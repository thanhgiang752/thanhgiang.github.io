var PortoWizard=function(t){function e(){if(t(".button-next").on("click",function(e){return!!function(t){function e(){if(!s){for(var t="",i=0;i<l.length;i++)l[i]=l[i]+1,l[i]>=a.length&&(l[i]=0),t+=a.charAt(l[i]);n[r](t),setTimeout(function(){e()},60)}}var n=jQuery(t);if("yes"==n.data("done-loading"))return!1;var i=n.text(),o=n.outerWidth(),a="⡀⡀⡀⡀⡀⡀⡀⡀⡀⡀⠄⠂⠁⠁⠂⠄",s=!1;n.css("width",o),n.addClass("wizard_step_loading_button_current");var r=n.is("input")?"val":"text";n[r](a),n.data("done-loading","yes");var l=[0,1,2];return e(),{done:function(){s=!0,n[r](i),n.removeClass("wizard_step_loading_button_current"),n.attr("disabled",!1)}}}(this)&&(t(this).data("callback")&&void 0!==i[t(this).data("callback")]?(i[t(this).data("callback")](this),!1):(n(),!0))}),t(".shortcode_list").length)return i.load_unused_shortcodes(),!1;t(".button-upload").on("click",function(t){t.preventDefault(),function(){"use strict";var t,e;if(void 0!==t)return void t.open();(t=wp.media.frames.file_frame=wp.media({title:"Upload Logo",button:{text:"Select Logo"},multiple:!1})).on("select",function(){e=t.state().get("selection").first().toJSON(),jQuery(".site-logo").attr("src",e.url),jQuery("#new_logo_id").val(e.id)}),t.open()}()}),t(".theme-presets a").on("click",function(e){e.preventDefault();t(this).parents("ul").first().find(".current").removeClass("current");t(this).parents("li").first().addClass("current");var n=t(this).data("style");return t("#new_style").val(n),!1}),t('.porto-setup-wizard-plugins input[type="checkbox"]').on("change",function(){var e=t(this).closest("li").data("slug");if("js_composer"==e||"elementor"==e){var n=t(this).closest(".porto-setup-wizard-plugins"),i=t(this).closest("form").find(".porto-notice");n.find('li[data-slug="js_composer"]').length&&!n.find('li[data-slug="js_composer"] input[type="checkbox"]').is(":checked")||n.find('li[data-slug="elementor"]').length&&!n.find('li[data-slug="elementor"] input[type="checkbox"]').is(":checked")?i.addClass("d-none"):i.removeClass("d-none")}})}function n(){t(".envato-setup-content").block({message:null,overlayCSS:{background:"#fff",opacity:.6}})}var i={install_plugins:function(e){(new function(){function e(t){"object"==typeof t&&void 0!==t.message?(s.find("span").text(t.message),void 0!==t.url?t.hash==d?(s.find("span").text("failed"),o()):(d=t.hash,jQuery.post(t.url,t,function(e){i(),s.find("span").text(t.message)}).fail(e)):(t.done,o())):(s.find("span").text("ajax error"),o())}function i(){l&&jQuery.post(ajaxurl,{action:"undefined"==typeof porto_setup_wizard_params?"porto_speed_optimize_wizard_plugins":"porto_setup_wizard_plugins",wpnonce:"undefined"==typeof porto_setup_wizard_params?porto_speed_optimize_wizard_params.wpnonce:porto_setup_wizard_params.wpnonce,slug:l},e).fail(e)}function o(){var e=!1;s&&(s.data("done_item")||(r++,s.data("done_item",1)),s.find(".spinner").css("visibility","hidden")),t(".porto-setup-wizard-plugins li").each(function(){t(this).hasClass("installing")&&(""==l||e?(l=t(this).data("slug"),s=t(this),i(),e=!1):t(this).data("slug")==l&&(e=!0))}),r>=t(".porto-setup-wizard-plugins li.installing").length&&a()}var a,s,r=0,l="",d="";return{init:function(e){t(".porto-setup-wizard-plugins > li").each(function(){t(this).find('input[type="checkbox"]').is(":checked")&&t(this).addClass("installing")}),a=function(){n(),t(e).attr("href")&&"#"!=t(e).attr("href")?window.location.href=e.href:window.location.reload()},o()}}}).init(e)},load_unused_shortcodes:function(){(new function(){function t(t,e){if(void 0!=typeof e)for(var n=0;n<e.length;n++)if(t==e[n])return!0;return!1}function e(e){if(e){var n="";for(var i in e){var o=e[i];n+="<li>",n+='<label class="checkbox checkbox-inline">',n+='<input type="checkbox" name="shortcodes[]" value="'+o+'"'+(t(o,porto_speed_optimize_wizard_params.shortcodes_to_remove)?' checked="checked"':"")+">",n+=o,n+="</label>",n+="</li>"}jQuery(".shortcode_list").html(n),jQuery(".porto-setup-actions .btn:disabled").removeAttr("disabled")}}return{init:function(){jQuery(".shortcode_list").block({message:null,overlayCSS:{background:"#f1f1f1",opacity:.6}}),jQuery.ajax({type:"post",url:ajaxurl,data:{action:"porto_speed_optimize_wizard_shortcodes",wpnonce:porto_speed_optimize_wizard_params.wpnonce},dataType:"json",success:e})}}}).init()}};return{init:function(){t(e)}}}(jQuery);PortoWizard.init();